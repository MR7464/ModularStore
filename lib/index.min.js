var ms=function(e,t){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=s(t);class n{id;config;static instance=void 0;constructor(e){this.id=Number((""+Math.random()*(new Date).getTime()).slice(-4)),this.config=e||{open:!0,key:"demo",presetEnv:"web"}}static getInterface(e){return!this.instance&&e&&(this.instance=new n(e)),n.instance}getPersist(){let e=sessionStorage.getItem(this.config.key);return e?JSON.parse(e):null}setPersist(e){return new Promise(((t,s)=>{try{sessionStorage.setItem(this.config.key,JSON.stringify(e)),t(sessionStorage.getItem(this.config.key))}catch(e){s(e)}}))}}return e.StoreProvider=e=>{const{StoreContext:s,children:o,reducer:i,initData:c={},persistConfig:a={open:!0,key:"demo",presetEnv:"web"}}=e,[l,g]=t.useReducer(i,n.getInterface(a)?.getPersist()||c),u=t.useCallback((e=>{try{e?.(l,g),console.log("DISPATCH CALLBACK")}catch(e){console.error(e.message)}}),[]);return t.useEffect((()=>(console.log("store change\nnext store",l),console.log("set Persist"),n.getInterface(a)?.setPersist(l),()=>{console.log("store provider destroy\npreview store",l)})),[l]),r.default.createElement(s.Provider,{value:{store:l,dispatch:g,action:u}},o)},e.createStoreContext=()=>r.default.createContext({store:{},dispatch:()=>{},action:()=>{}}),Object.defineProperty(e,"__esModule",{value:!0}),e}({},React);
